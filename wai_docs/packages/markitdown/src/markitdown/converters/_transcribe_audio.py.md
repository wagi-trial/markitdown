# packages/markitdown/src/markitdown/converters/_transcribe_audio.py

**[‚Üê Back to Parent Directory](./README.md)**

---

<details>
<summary>üìä Documentation Metadata (click to expand)</summary>

```json
{
  "source_file": "packages/markitdown/src/markitdown/converters/_transcribe_audio.py",
  "file_hash": "e43b9f6d39f33648d52f81c3e0c71649490212d1823293765e6f3f874b698a3c",
  "last_updated": "2025-12-23T15:52:23.459983+00:00",
  "functions": {
    "transcribe_audio": {
      "hash": "7195160bc997ad3955ef3d71168cc60ba246ec8612ac8f3df763b667cb76de08",
      "lines": "23-50",
      "last_updated": "2025-12-23T15:52:23.459904+00:00"
    }
  }
}
```

</details>



The Python file `packages/markitdown/src/markitdown/converters/_transcribe_audio.py` implements audio transcription functionality. It contains a single function, `transcribe_audio`, which takes an audio file stream and an optional audio format parameter, defaulting to "wav". The function processes the audio input, converting it to a suitable format if necessary, and then utilizes the SpeechRecognition library to transcribe the audio into text.

The main function defined in this file is `transcribe_audio(file_stream: BinaryIO, *, audio_format: str = "wav") -> str`. This function is responsible for checking for required dependencies, handling different audio formats, and performing the transcription using Google's speech recognition service. It raises a `MissingDependencyException` if the necessary libraries (`speech_recognition` and `pydub`) are not installed, and it raises a `ValueError` for unsupported audio formats.

The file explicitly imports the `io` and `sys` modules, as well as the `BinaryIO` type from the `typing` module. It also imports `MissingDependencyException` from a parent module. The code uses the `speech_recognition` library for audio processing and the `pydub` library for audio format conversion. The function manipulates `BinaryIO` streams for audio input and utilizes `io.BytesIO` for in-memory audio storage during format conversion. The output of the function is a string representing the transcribed text or a message indicating no speech was detected.

## Functions and Classes

## `transcribe_audio`

**Location:** [`packages/markitdown/src/markitdown/converters/_transcribe_audio.py:23`](/packages/markitdown/src/markitdown/converters/_transcribe_audio.py#L23-L50)

# Function Documentation: `transcribe_audio`

## Description
The `transcribe_audio` function transcribes audio from a given file stream into text. It supports various audio formats and utilizes the Google Speech Recognition API to perform the transcription.

## Parameters
- `file_stream` (BinaryIO): A binary stream representing the audio file to be transcribed. This stream must be compatible with the specified audio format.
  
- `audio_format` (str, optional): A string indicating the format of the audio file. The default value is "wav". Supported formats include:
  - "wav"
  - "aiff"
  - "flac"
  - "mp3"
  - "mp4"

  If the format is "mp3" or "mp4", the function converts the audio to "wav" format before transcription. If an unsupported format is provided, a `ValueError` is raised.

## Return Value
- Returns a string containing the transcribed text from the audio. If no speech is detected, it returns the string "[No speech detected]".

## Dependencies
The function relies on the following external modules and services:
- `pydub`: Used for handling audio file conversions.
- `io`: Used to create an in-memory binary stream for the converted audio.
- `speech_recognition` (imported as `sr`): Used for recognizing speech from audio files.
- The function requires the installation of the `markitdown` package with the `[audio-transcription]` optional dependencies. If these dependencies are not installed, a `MissingDependencyException` is raised.

## Usage Example
```python
from io import BytesIO

# Assuming 'audio_file' is a binary stream of an audio file in a supported format
with open('path/to/audio/file.mp3', 'rb') as audio_file:
    transcript = transcribe_audio(audio_file, audio_format='mp3')
    print(transcript)
```

---


---
*This documentation was automatically generated by AI (Woden DocBot) and may contain errors. It is the responsibility of the user to validate the accuracy and completeness of this documentation.*
